---
phase: 04-tui-dashboard
plan: 05
type: execute
wave: 4
depends_on: ["04-04"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "The TUI launches and renders without visual glitches"
    - "Keyboard controls (tabs, scroll, pause, quit) respond correctly"
    - "Agent events appear in the log stream in real time"
    - "The status bar shows accurate state information"
    - "Headless mode still works identically to before"
  artifacts: []
  key_links: []
---

<objective>
Verify the TUI dashboard works correctly through human testing.

Purpose: TUI rendering quality, keyboard responsiveness, and visual layout cannot be verified by automated tests alone. This checkpoint confirms the complete TUI works as designed.
Output: User confirmation that the TUI meets Phase 4 requirements.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/04-tui-dashboard/04-CONTEXT.md
@.planning/phases/04-tui-dashboard/04-04-SUMMARY.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete TUI dashboard with tabbed interface, log stream, status bar, keyboard controls, and agent event integration</what-built>
  <how-to-verify>
1. Verify headless mode still works:
   ```
   cargo run -- run --headless
   ```
   Confirm agent starts and outputs to terminal as before. Ctrl+C to stop.

2. Launch TUI mode:
   ```
   cargo run -- run
   ```

3. Verify visual layout:
   - Tab bar visible at top with "Agent" and "Discoveries" tabs
   - "Agent" tab is active (highlighted)
   - Main content area shows log stream with bordered panel
   - Sub-agent panel visible at bottom of Agent tab (placeholder text)
   - Two-line status bar at bottom shows agent state, context gauge, session/turn/tool counters, and keybind hints

4. Verify log stream (requires Ollama running with configured model):
   - Agent thoughts appear as color-coded log entries with timestamps
   - Tool calls appear with yellow coloring
   - Tool results appear collapsed (one-line summary with line count)
   - New entries auto-scroll into view

5. Test keyboard controls:
   - Tab: switches to Discoveries tab
   - Shift+Tab: switches back to Agent tab
   - Up/Down arrows: scroll through log entries (auto-scroll pauses on up)
   - g or End: jump to bottom (resume auto-scroll)
   - e: expand/collapse a tool result entry
   - p: pause agent (status bar should show "Paused", agent stops after current tool)
   - p again: resume agent
   - t: toggle sub-agent panel visibility
   - q: shows quit confirmation
   - y: confirms quit and exits cleanly
   - n or Escape: cancels quit

6. Verify status bar updates:
   - Agent state changes between Thinking/Executing/Idle
   - Context gauge updates after each turn
   - Turn and tool call counters increment

7. Verify terminal restoration:
   - After quitting (q then y), terminal returns to normal state
   - No garbled output or leftover raw mode
  </how-to-verify>
  <resume-signal>Type "approved" if the TUI works correctly, or describe specific issues to fix.</resume-signal>
</task>

</tasks>

<verification>
Human confirms all 7 verification areas pass.
</verification>

<success_criteria>
The TUI dashboard renders correctly, keyboard controls work, agent events stream in real time, and the status bar provides accurate state information. Terminal is properly cleaned up on exit.
</success_criteria>

<output>
After completion, create `.planning/phases/04-tui-dashboard/04-05-SUMMARY.md`
</output>
